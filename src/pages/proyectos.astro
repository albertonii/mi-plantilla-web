---
import BaseLayout from '../layouts/BaseLayout.astro';
import Navigation from '../components/Navigation.astro';
import Footer from '../components/Footer.astro';

// Datos de ejemplo - en producciÃ³n vendrÃ­an de Supabase
const projectsData = [
  {
    id: '1',
    title: 'E-commerce Platform',
    description: 'Plataforma de comercio electrÃ³nico completa con carrito de compras, pagos y gestiÃ³n de inventario.',
    image_url: '/images/project1.jpg',
    start_date: '2024-01-01',
    end_date: '2024-03-15',
    technologies: ['React', 'Node.js', 'PostgreSQL', 'Stripe'],
    role: 'Full Stack Developer',
    status: 'completed',
    external_links: {
      github: 'https://github.com/user/project',
      live: 'https://project-demo.com'
    }
  },
  {
    id: '2',
    title: 'Portfolio Website',
    description: 'Sitio web personal con CMS integrado y galerÃ­a de fotografÃ­a.',
    image_url: '/images/project2.jpg',
    start_date: '2024-02-01',
    end_date: '2024-04-01',
    technologies: ['Astro', 'Tailwind CSS', 'Supabase'],
    role: 'Frontend Developer',
    status: 'completed',
    external_links: {
      github: 'https://github.com/user/portfolio',
      live: 'https://portfolio.com'
    }
  },
  {
    id: '3',
    title: 'Task Management App',
    description: 'AplicaciÃ³n de gestiÃ³n de tareas con colaboraciÃ³n en tiempo real.',
    image_url: '/images/project3.jpg',
    start_date: '2024-05-01',
    technologies: ['Vue.js', 'Firebase', 'TypeScript'],
    role: 'Frontend Developer',
    status: 'in-progress',
    external_links: {
      github: 'https://github.com/user/task-app'
    }
  }
];

const allTechnologies = [...new Set(projectsData.flatMap(project => project.technologies))];
---

<BaseLayout title="Proyectos - Portfolio Personal">
  <Navigation />
  
  <!-- Hero Section -->
  <section class="pt-20 pb-16 px-4 sm:px-6 lg:px-8">
    <div class="max-w-7xl mx-auto">
      <div class="text-center">
        <h1 class="text-4xl sm:text-5xl font-space-grotesk font-bold text-gray-100 mb-6">
          Mis <span class="text-primary-400">Proyectos</span>
        </h1>
        <p class="text-xl text-gray-400 max-w-3xl mx-auto mb-8">
          Una colecciÃ³n de proyectos que demuestran mi experiencia en desarrollo web 
          y mi pasiÃ³n por crear soluciones digitales innovadoras.
        </p>
      </div>
    </div>
  </section>

  <!-- Filters Section -->
  <section class="pb-8 px-4 sm:px-6 lg:px-8">
    <div class="max-w-7xl mx-auto">
      <div class="flex flex-wrap gap-4 justify-center">
        <button
          class="filter-btn active px-4 py-2 rounded-lg text-sm font-medium transition-colors"
          data-filter="all"
        >
          Todos
        </button>
        {allTechnologies.map((tech) => (
          <button
            class="filter-btn px-4 py-2 rounded-lg text-sm font-medium transition-colors"
            data-filter={tech}
          >
            {tech}
          </button>
        ))}
      </div>
    </div>
  </section>

  <!-- Projects Section -->
  <section class="pb-16 px-4 sm:px-6 lg:px-8">
    <div class="max-w-7xl mx-auto">
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-8" id="projects">
        {projectsData.map((project) => (
          <div 
            class="project-card bg-dark-800 rounded-lg overflow-hidden hover:bg-dark-700 transition-all duration-300"
            data-technologies={project.technologies.join(' ')}
          >
            <div class="aspect-video bg-gradient-to-br from-primary-600 to-primary-800 relative">
              <div class="w-full h-full bg-dark-700 flex items-center justify-center">
                <span class="text-4xl">ðŸ’»</span>
              </div>
              <div class="absolute top-4 right-4">
                <span class={`px-2 py-1 rounded text-xs font-medium ${
                  project.status === 'completed' ? 'bg-green-600 text-white' :
                  project.status === 'in-progress' ? 'bg-yellow-600 text-white' :
                  'bg-blue-600 text-white'
                }`}>
                  {project.status === 'completed' ? 'Completado' :
                   project.status === 'in-progress' ? 'En Progreso' : 'Planificado'}
                </span>
              </div>
            </div>
            <div class="p-6">
              <h3 class="text-xl font-semibold text-gray-100 mb-2">{project.title}</h3>
              <p class="text-gray-400 mb-4">{project.description}</p>
              
              <div class="flex items-center text-sm text-gray-500 mb-4">
                <span>{project.role}</span>
                <span class="mx-2">â€¢</span>
                <span>{new Date(project.start_date).toLocaleDateString('es-ES', { year: 'numeric', month: 'short' })}</span>
                {project.end_date && (
                  <>
                    <span class="mx-2">-</span>
                    <span>{new Date(project.end_date).toLocaleDateString('es-ES', { year: 'numeric', month: 'short' })}</span>
                  </>
                )}
              </div>
              
              <div class="flex flex-wrap gap-2 mb-4">
                {project.technologies.map((tech) => (
                  <span class="px-2 py-1 bg-primary-600/20 text-primary-400 text-xs rounded">
                    {tech}
                  </span>
                ))}
              </div>
              
              <div class="flex gap-2">
                {project.external_links?.github && (
                  <a
                    href={project.external_links.github}
                    target="_blank"
                    rel="noopener noreferrer"
                    class="px-3 py-1 bg-dark-700 text-gray-300 text-sm rounded hover:bg-dark-600 transition-colors"
                  >
                    GitHub
                  </a>
                )}
                {project.external_links?.live && (
                  <a
                    href={project.external_links.live}
                    target="_blank"
                    rel="noopener noreferrer"
                    class="px-3 py-1 bg-primary-600 text-white text-sm rounded hover:bg-primary-700 transition-colors"
                  >
                    Ver Demo
                  </a>
                )}
              </div>
            </div>
          </div>
        ))}
      </div>
    </div>
  </section>

  <Footer />

  <style>
    .filter-btn {
      @apply bg-dark-800 text-gray-300 hover:bg-dark-700;
    }
    .filter-btn.active {
      @apply bg-primary-600 text-white;
    }
  </style>

  <script>
    // Filtros de proyectos
    const filterButtons = document.querySelectorAll('.filter-btn');
    const projectCards = document.querySelectorAll('.project-card');

    filterButtons.forEach(button => {
      button.addEventListener('click', () => {
        const filter = button.getAttribute('data-filter');
        
        // Actualizar botones activos
        filterButtons.forEach(btn => btn.classList.remove('active'));
        button.classList.add('active');
        
        // Filtrar proyectos
        projectCards.forEach(card => {
          const technologies = card.getAttribute('data-technologies');
          if (filter === 'all' || technologies.includes(filter)) {
            card.style.display = 'block';
          } else {
            card.style.display = 'none';
          }
        });
      });
    });
  </script>
</BaseLayout>
